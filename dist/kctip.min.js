"use strict";var KCTip=function(){function t(t,i){if(t==document)return!1;for(var e=(t.document||t.ownerDocument).querySelectorAll(i),o=e.length;--o>=0&&e.item(o)!==t;);return o>-1}function i(t,i){return t.appendChild(i)}function e(t){return document.createElement(t)}function o(t,i,e,o){return t.addEventListener(i,e,o)}function s(t,i,e,o){return t.removeEventListener(i,e,o)}function n(i,e,o){for(var s=i.target;s&&s!=this;s=s.parentNode)if(t(s,e))return o(s)}function c(t,i){return t.classList.add(i)}function p(t,i){return t.classList.remove(i)}function r(t,i){return t.classList.contains(i)}function a(t){var i=t.getBoundingClientRect(),e=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;return{top:i.top+o,left:i.left+e,scrollTop:o,scrollLeft:e}}function d(t){u=t.clientX,f=t.clientY,l||requestAnimationFrame(h),l=!0}function h(){l=!1;var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight,e=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop,s=u+10+e,n=f+25+o;return s+x.w+10>t+e&&(s=t+e-x.w-10),n+x.h+10>i+o&&(n=i+o-x.h-10),x.move(s,n)}var l=!1,u=void 0,f=void 0,b=e("style");b.innerHTML='.kctip{z-index:100;position:absolute;display:none;top:-1000px;left:-1000px;color:#f2f2f2;background:rgba(38,38,38,.9);font-size:14px;line-height:150%;opacity:0;cursor:default!important;-webkit-transition:opacity .2s ease-out;transition:opacity .2s ease-out;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-box-shadow:0 5px 5px rgba(0,0,0,.35);box-shadow:0 5px 5px rgba(0,0,0,.35);max-width:320px}.kctip>.wrapper{display:block;position:relative;z-index:1;border:1px solid #cec6a5;padding:8px 10px}.kctip.mod-blur-backdrop,.kctip.mod-blur-backdrop>.wrapper{background:rgba(38,38,38,.5)}.kctip.on{opacity:1}.kctip.on.mod-blur-backdrop{-webkit-backdrop-filter:blur(7.5px);backdrop-filter:blur(7.5px)}.kctip.show{display:block;will-change:opacity}.kctip:before{position:absolute;width:0;height:0;overflow:hidden;content:"";border:5px solid transparent}.kctip .loading{padding:.25em .75em}.kctip[kctip-indicator-pos=bottom]:before{border-top-color:#cec6a5;left:50%;left:-webkit-calc(50% - 4px);left:calc(50% - 4px);bottom:-10px}.kctip[kctip-indicator-pos=bottom]{-webkit-box-shadow:0 -5px 5px rgba(0,0,0,.35);box-shadow:0 -5px 5px rgba(0,0,0,.35)}.kctip[kctip-indicator-pos=top]:before{border-bottom-color:#cec6a5;left:50%;left:-webkit-calc(50% - 4px);left:calc(50% - 4px);top:-10px}.kctip[kctip-indicator-pos=left]:before{border-right-color:#cec6a5;top:50%;top:-webkit-calc(50% - 4px);top:calc(50% - 4px);left:-10px}.kctip[kctip-indicator-pos=right]:before{border-left-color:#cec6a5;top:50%;top:-webkit-calc(50% - 4px);top:calc(50% - 4px);right:-10px}.kctip[kctip-class=ships]{min-width:320px;width:320px;max-width:none}.kctip[kctip-class=ships]>.wrapper{padding:0 0 0 128px;overflow:hidden;min-height:175px}.kctip[kctip-class=ships] img{display:block;float:left;width:auto;height:auto;border:0;min-width:126px;max-width:126px;margin:1px 1px 1px -127px}.kctip[kctip-class=ships] h3,.kctip[kctip-class=ships] h4{margin:0;overflow:hidden;padding:0 0 0 6px}.kctip[kctip-class=ships] h3{height:34px;line-height:34px;font-size:22px;font-weight:lighter;background:#cec6a5;color:#594700}.kctip[kctip-class=ships] h3 small{font-size:14px;padding:0 0 0 .5em;vertical-align:middle}.kctip[kctip-class=ships] h4{height:20px;line-height:20px;font-size:12px;font-weight:400;background:#594700;color:#cec6a5;letter-spacing:-.025em}.kctip[kctip-class=ships] h4 i{font-style:normal}.kctip[kctip-class=ships] h4 b{font-weight:400;padding:0 .15em}.kctip[kctip-class=ships] dl{margin:0;line-height:19px;font-size:12px;position:relative;width:100%;padding:3px 8px 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.kctip[kctip-class=ships] dl dd,.kctip[kctip-class=ships] dl dt{display:block;position:relative;margin:0;padding:0;float:left}.kctip[kctip-class=ships] dl dt{max-width:18%;padding-right:6px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.kctip[kctip-class=ships] dl dd{width:32%;font-size:13px;color:#fff2bf;font-weight:lighter}.kctip[kctip-class=ships] dl dd sup{display:inline-block;font-size:12px;-webkit-transform:scale(.83333333);transform:scale(.83333333);-webkit-transform-origin:0 100%;transform-origin:0 100%;margin:-100% -100% 0 0;padding-left:.35em;opacity:.75}.kctip[kctip-class=ships] dl dd:nth-child(4n+2){width:28%}.kctip[kctip-class=ships] dl dd:nth-child(4n+4){width:36%}.kctip[kctip-class=equipments] h3{display:block;position:relative;padding-left:42px;margin:0}.kctip[kctip-class=equipments] h3>s{display:block;width:36px;height:36px;position:absolute;top:0;left:0;background:50% 50% no-repeat}.kctip[kctip-class=equipments] h3>strong{font-size:22px;line-height:22px;color:#e8dfc2;display:block;position:relative;font-weight:400;padding:0 0 2px}.kctip[kctip-class=equipments] h3>strong small{padding-left:.35em;font-size:smaller}.kctip[kctip-class=equipments] h3>small{font-size:14px;font-weight:400;color:#c9c19f;display:block;font-family:"Helvetica Neue",Helvetica,"Nimbus Sans L",Arial,"Liberation Sans","Microsoft YaHei UI","Microsoft YaHei","Hiragino Sans GB","Wenquanyi Micro Hei","WenQuanYi Zen Hei","ST Heiti",SimHei,"WenQuanYi Zen Hei Sharp",Meiryo,sans-serif;padding:0;line-height:14px;margin-top:2px}.kctip[kctip-class=equipments] h3~span{display:block}.kctip[kctip-class=equipments] h3~span.requirement{padding-left:22px;background:0 50% no-repeat;-webkit-background-size:16px 16px;background-size:16px 16px}.kctip[kctip-class=equipments] h3~span.requirement.is-blueprint{background-image:url(http://fleet.diablohu.com/!/assets/images/blueprint.png)}.kctip[kctip-class=equipments] h3~span.requirement.is-catapult{background-image:url(http://fleet.diablohu.com/!/assets/images/catapult.png)}.kctip[kctip-class=equipments] h3+span{border-top:1px dashed #c9c19f;padding-top:8px;margin-top:10px}.kctip[kctip-class=equipments] h3+span.requirement{background-position-y:-webkit-calc(50% + 4px);background-position-y:calc(50% + 4px)}',i(document.head,b);var m=!1,g=!1,k=!1,x={pos:"bottom",size_indicator:8,language:"zh_cn",cache:{},types:["ships","equipments"],filters:[],countdown_fade:250,init:function(){if(this.is_init)return this;this.body=e("div"),c(this.body,"kctip"),this.body.setAttribute("id","kctip");var t=["transitionend","webkitTransitionEnd","mozTransitionEnd"];t.forEach(function(t){o(this.body,t,function(t){var i=window.getComputedStyle?getComputedStyle(t.target,null):t.target.currentStyle;t.currentTarget==t.target&&"opacity"==t.propertyName&&0==i.opacity&&x.hideAfter()})},this),i(document.body,this.body),this.container=e("div"),c(this.container,"wrapper"),i(this.body,this.container),("backdrop-filter"in document.documentElement.style||"-webkit-backdrop-filter"in document.documentElement.style)&&c(this.body,"mod-blur-backdrop"),this.is_init=!0},show:function(t,i,e){return!m&&k&&t?(this.el=t||document.body,(i=this.content(i))?(clearTimeout(this.timeout_fade),this.pos=e||this.el.getAttribute("kctip-position")||this.pos,this.init(),r(this.body,"show")||c(this.body,"show"),this.update(i),void(this.is_showing=!0)):!1):!1},position:function(t){this.body.style.top="",this.body.style.left="",this.w=this.body.offsetWidth,this.h=this.body.offsetHeight;var i=this["pos_"+(t||this.pos)](this.w,this.h);i&&this.move(i.x,i.y)},hide:function(t){function i(){p(x.body,"on"),s(x.el,"mousemove",d),x.el=null,x.is_showing=!1,x.pos="bottom"}return this.is_init&&this.is_showing?void("mouse"==this.pos?requestAnimationFrame(i):this.timeout_fade=setTimeout(i,t?0:this.countdown_fade)):!1},hideAfter:function(){p(this.body,"show"),this.body.style.top="",this.body.style.left="",this.body.removeAttribute("kctip-indicator-pos"),this.body.removeAttribute("kctip-indicator-offset-x"),this.body.removeAttribute("kctip-indicator-offset-y"),this.body.removeAttribute("kctip-class"),this.container.innerHTML="",delete this.curLoading,delete this.t,delete this.w,delete this.h,u=null,f=null},content:function(t,i){if(!t){var e=void 0,o=void 0;i=i||this.el,t=i.getAttribute("href");var s=/\/([a-z]+)\/([0-9]+)/gi.exec(t);return s&&s.length>1&&(e=s[1],o=s[2]),e&&o&&this.types.indexOf(e)>=0?(this.t=e,this.cache[e]||(this.cache[e]={}),this.cache[e][this.language]||(this.cache[e][this.language]={}),this.cache[e][this.language][o]?this.cache[e][this.language][o]:this.load(e,o,this.language)):null}return t},update:function(t,e){return this.t=e||this.t,t.nodeType&&1==t.nodeType?i(this.container,t):this.container.innerHTML=t,this.t?this.body.setAttribute("kctip-class",this.t):this.body.removeAttribute("kctip-class"),this.position()},load:function(t,s,n){this.curLoading=t+"::"+s+"::"+n;var c=e("script");return c.src="http://fleet.diablohu.com/!/tip/"+t+"/"+n+"/"+s+".js",o(c,"error",function(t){x.update("发生错误...","error")}),i(document.head,c),this.t="loading","载入中..."},loaded:function(t,i,e,o){return this.cache[t]||(this.cache[t]={}),this.cache[t][this.language]||(this.cache[t][this.language]={}),this.cache[t][this.language][i]=o,t+"::"+i+"::"+e==this.curLoading?x.update(o,t):void 0},move:function(t,i){this.body.style.top=i+"px",this.body.style.left=t+"px",c(this.body,"on")},get_indicator_size:function(){return this.size_indicator},pos_mouse:function(t,i){o(this.el,"mousemove",d)},pos_bottom:function(t,i){var e=a(this.el),o=e.left+(this.el.offsetWidth-this.body.offsetWidth)/2,s=e.top+this.el.offsetHeight+this.get_indicator_size();return this.body.setAttribute("kctip-indicator-pos","top"),this.checkpos(o,s,t,i,e)},pos_top:function(t,i){var e=a(this.el),o=e.left+(this.el.offsetWidth-this.body.offsetWidth)/2,s=e.top-i-this.get_indicator_size();return this.body.setAttribute("kctip-indicator-pos","bottom"),this.checkpos(o,s,t,i,e)},pos_left:function(t,i){var e=a(this.el),o=e.left-t-this.get_indicator_size(),s=e.top+(this.el.offsetHeight-this.body.offsetHeight)/2;return this.body.setAttribute("kctip-indicator-pos","right"),this.checkpos(o,s,t,i,e)},pos_right:function(t,i){var e=a(this.el),o=e.left+this.el.offsetWidth+this.get_indicator_size(),s=e.top+(this.el.offsetHeight-this.body.offsetHeight)/2;return this.body.setAttribute("kctip-indicator-pos","left"),this.checkpos(o,s,t,i,e)},checkpos:function(t,i,e,o,s){s=s||a(this.el);var n=t,c=i,p={x:n,y:c},r=document.documentElement.clientWidth,d=document.documentElement.clientHeight,h="undefined"==typeof s.scrollLeft?window.pageXOffset||document.documentElement.scrollLeft:s.scrollLeft,l="undefined"==typeof s.scrollTop?window.pageYOffset||document.documentElement.scrollTop:s.scrollTop;return e=e||this.w,o=o||this.h,t+e>r+h?p=e>s.left?{x:r+h-e-2,y:i}:this.pos_left(e,o):0>t&&(p={x:10,y:i}),i+o>l+d?p=this.pos_top(e,o):l>i&&(p=this.pos_bottom(e,o)),this.body.setAttribute("kctip-indicator-offset-x",t-n+"px"),this.body.setAttribute("kctip-indicator-offset-y",i-c+"px"),p},trigger_by_el:function(t){this.show(t)}};return o(document,"DOMContentLoaded",function(){function t(t){m=!0,g=!0,k=!1}function i(t){m=!1,g=!1,k=!1}var e=document.body;o(e,"touchstart",t),o(e,"touchend",i),o(e,"touchcancel",i),o(e,"pointerover",function(i){"touch"==i.pointerType?t():(m=!1,g=!1)}),o(e,"mouseover",function(t){g?(g=!1,m=!0):(m=!1,k=!0)}),o(e,"mouseout",function(t){k=!1});var s='[href^="http://fleet.diablohu.com/"], [kctip]',c=document.createEvent("Event"),p=document.createEvent("Event");c.initEvent("tipshow",!0,!0),p.initEvent("tiphide",!0,!0),o(e,"mouseover",function(t){m||n(t,s,function(t){x.show(t)})}),o(e,"mouseout",function(t){n(t,s,function(){x.hide()})}),o(e,"click",function(t){n(t,s,function(){x.hide(!0)})}),o(e,"tipshow",function(t){n(t,s,function(t){x.trigger_by_el(t)})}),o(e,"tiphide",function(t){n(t,s,function(){x.hide()})})}),x}();